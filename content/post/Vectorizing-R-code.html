---
title: "Vectorizing R code"
date: '2017-06-06'
output: html_document
comments: true
prev_next: true
categories: [R]
tags: [vectorization, refactoring, linear algebra]
---



<div id="the-beginning" class="section level3">
<h3>The beginning …</h3>
<p>Somewhere last January I began my R adventure, which means that I have been programming with it for almost five months now. Prior to this period, my only experiences with R have been very frustrating, to say the least. These might have occurred while I was looking for the implementation of an obscure econometrical method or the one or two times that I tried to learn R and failed miserably. Me not being able to learn R at once is not that surprising, considering that R is a quirky language with a though learning curve. However, these things were not the only cause of my failure, what felt as the main cause was the difference between R and my previous programming language: <a href="https://nl.mathworks.com/?s_tid=gn_logo">MATLAB®</a>.</p>
<p>Matlab is a matrix based language optimized for operations involving matrices and vectors. This means that it is possible to perform computations directly on whole vectors and matrices instead on scalars (numbers) alone. Hence, in MATLAB it is encouraged to, for example, avoid endless nested loops and instead use matrix based methods.</p>
<p>The programming paradigm of MATLAB is therefore completely different from the R philosophy, that customarily dictates the use of the <a href="https://stackoverflow.com/a/7141669/8108484">apply</a> family that loops over individual data points. This has resulted in the somewhat unfortunate reputation that R is inherently <a href="http://fluff.info/blog/arch/00000172.htm">slow</a>. While there is some truth to this statement, because compiled languages are of course faster, the performance of R has improved a lot over the years. For example, by introducing built in functions (e.g. <code>colSums</code>) that use matrix based methods and that have been written in low-level languages like C and Fortran.</p>
</div>
<div id="vectorization" class="section level3">
<h3>Vectorization</h3>
<p>The process of revising loop-based, scalar-oriented code to use matrix and vector operations is called <em>vectorization</em>. Vectorizing your code is worthwhile for several reasons:</p>
<ul>
<li>Appearance: Vectorized mathematical code appears more like the mathematical expressions found in textbooks, making the code easier to understand.</li>
<li>Less Error Prone: Without loops, vectorized code is often shorter. Fewer lines of code mean fewer opportunities to introduce programming errors.</li>
<li>Performance: Vectorized code often runs much faster than the corresponding code containing loops.</li>
<li>Scalability: Matrix based methods are very generic and therefore usually nest many different models.</li>
</ul>
<div id="mathematical-behind-vectorization" class="section level4">
<h4>Mathematical behind vectorization</h4>
<p>Vectorization works by utilizing advanced techniques based on mathematical matrix theory.</p>
</div>
</div>
