<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.20.7" />

<link href="/images/favicon.ico" rel="icon" type="image/x-icon" />


<title>Vectorizing R code - Robbert-Jan &#39;t Hoen</title>
<meta property="og:title" content="Vectorizing R code - Robbert-Jan &#39;t Hoen">



  




<script src="https://use.fontawesome.com/d11019d12c.js"></script>




<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">

<link rel="stylesheet" href="/css/custom.css">





  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo_rj3.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/post/">Blog</a></li>
    
    <li><a href="/page/vitae/">Vitae</a></li>
    
    <li><a href="/page/about_me/">About</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">3 min read</span>
    

    <h1 class="article-title">Vectorizing R code</h1>

    
    <span class="article-date">2017/06/06 
    
    
     &bull;
<span style="font-size:15px;color:light grey;"><a style="color:light grey;text-decoration:none;" href="/tags/r">R</a>  </span>
  &bull;


  
    
<span style="font-size:15px;"> <i class="fa fa-tags" aria-hidden="true"></i> 

<a style="color:light grey;text-decoration:none;" href="/tags/linear-algebra">linear algebra</a> <a style="color:light grey;text-decoration:none;" href="/tags/refactoring">refactoring</a> <a style="color:light grey;text-decoration:none;" href="/tags/vectorization">vectorization</a>  </span>



</span>
    





<div class="article-content" style="font-size: 19px;">
      <div id="the-beginning" class="section level3">
<h3>The beginning …</h3>
<p>Somewhere last January I began my R adventure, which means that I have been programming with it for almost five months now. Prior to this period, my only experiences with R have been very frustrating, to say the least. These might have occurred while I was looking for the implementation of an obscure econometrical method or the one or two times that I tried to learn R and failed miserably. Me not being able to learn R at once is not that surprising, considering that R is a quirky language with a though learning curve. However, these things were not the only cause of my failure, what felt as the main cause was the difference between R and my previous programming language: <a href="https://nl.mathworks.com/?s_tid=gn_logo">MATLAB®</a>.</p>
<p>Matlab is a matrix based language optimized for operations involving matrices and vectors. This means that it is possible to perform computations directly on whole vectors and matrices instead on scalars (numbers) alone. Hence, in MATLAB it is encouraged to, for example, avoid endless nested loops and instead use matrix based methods.</p>
<p>The programming paradigm of MATLAB is therefore completely different from the R philosophy, that customarily dictates the use of the <a href="https://stackoverflow.com/a/7141669/8108484">apply</a> family that loops over individual data points. This has resulted in the somewhat unfortunate reputation that R is inherently <a href="http://fluff.info/blog/arch/00000172.htm">slow</a>. While there is some truth to this statement, because compiled languages are of course faster, the performance of R has improved a lot over the years. For example, by introducing built in functions (e.g. <code>colSums</code>) that use matrix based methods and that have been written in low-level languages like C and Fortran.</p>
</div>
<div id="vectorization" class="section level3">
<h3>Vectorization</h3>
<p>The process of revising loop-based, scalar-oriented code to use matrix and vector operations is called <em>vectorization</em>. Vectorizing your code is worthwhile for several reasons:</p>
<ul>
<li>Appearance: Vectorized mathematical code appears more like the mathematical expressions found in textbooks, making the code easier to understand.</li>
<li>Less Error Prone: Without loops, vectorized code is often shorter. Fewer lines of code mean fewer opportunities to introduce programming errors.</li>
<li>Performance: Vectorized code often runs much faster than the corresponding code containing loops.</li>
<li>Scalability: Matrix based methods are generic and therefore usually nest many different models.</li>
</ul>
<div id="mathematics-behind-vectorization" class="section level4">
<h4>Mathematics behind vectorization</h4>
<p>Under the hood, vectorization works by utilizing advanced techniques based on mathematical matrix theory, and therefore, to truly grasp the ideas behind vectorization, it is necessary to get our hands dirty — we will have to take a look at the mathematics that makes up most of our beloved models.</p>
<p>The key subarea of mathematics involved with computers and programming is linear algebra, the language of vectors and matrices. Below, I will give a short introduction to linear algebra to give you some intuition, however, if you are interested to learn about it in some more detail, then I advise this <a href="http://www.cs.cas.cz/duintjertebbens/pubs/Lang1.pdf">book</a> for a thorough introduction to linear algebra by Serge Lang, former professor emeritus of mathematics at Yale University.</p>
<div style="border-style:solid; border-width: 2px;border-radius:5px;padding: 0px 10px 0px 10px;">
<p><strong><em>Linear algebra introduction</em></strong> <br> In everyday life, we continuously use numbers and perform predefined operations, such as addition <span class="math inline">\(+\)</span>, subtraction <span class="math inline">\(-\)</span>, and multiplication <span class="math inline">\(\times\)</span> that all take two and return one number. <br></p>
<p>In linear algebra, this is seen as the <span class="math inline">\(1\)</span>-dimensional special case of a more general <span class="math inline">\(n\)</span>-dimensional space. The building blocks of this <span class="math inline">\(n\)</span>-dimensional space are so-called <span class="math inline">\(n\)</span>-tuples,<span class="math display">\[(x_1, x_2, ..., x_n) ,\]</span>otherwise known as vectors. The numbers <span class="math inline">\(x_1, x_2, ..., x_n\)</span> are called coordinates, and in <span class="math inline">\(1\)</span>-dimensional space they represent a point on a line, in <span class="math inline">\(2\)</span>-dimensional space they represent a point on a plane, in <span class="math inline">\(3\)</span>-dimensional space they represent a point on a <span class="math inline">\(3\)</span>d surface, <span class="math inline">\(...\)</span>, and finally, in <span class="math inline">\(n\)</span>-dimensional space they represent a point on a <span class="math inline">\(n\)</span>d surface.</p>
</div>
</div>
</div>

    </div>
    <div>
      
      <nav id="article-nav">
    
    <a href="/post/first-blog-post/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> First blog post</div>
    </a>
    

    
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/post\/first-blog-post\/';
    
  } else if (e.which == 39) {  
    
  }
  if (url) window.location = url;
});
</script>
      
    </div>
    
  </article>



<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//robbertjan94-github-io.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




</main>

      <footer class="footer">
        <ul class="footer-links">
          
                     <li><a>Robbert-Jan &#39;t Hoen</a></li>
           <li><a href="https://linkedin.com/in/robbert-jan-t-hoen-b8930399"><i class="fa fa-linkedin" aria-hidden="true" title="Linkedin"></i><span class="sr-only">Linkedin</span></a></li>
          <li><a href="https://github.com/robbertjan94"><i class="fa fa-github" aria-hidden="true" title="Github"></i><span class="sr-only">Github</span></a></li>
 

   <li><a href="/"><i class="fa fa-copyright" aria-hidden="true" title="Copyright"></i> 2017</a></li>



        </ul>
      </footer>

    </div>
    
    

    
<script src="/js/math-code.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-99839400-1', 'auto');
ga('send', 'pageview');
</script>

  </body>
</html>

